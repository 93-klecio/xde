{"version":3,"sources":["commands/init.js"],"names":[],"mappings":";;;;AACA,IAAI,WAAW,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;AAC1C,IAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AACvB,IAAI,QAAQ,GAAG,OAAO,CAAC,qBAAqB,CAAC,CAAC;AAC9C,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC/B,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;;AAE3B,IAAI,YAAY,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;;AAE7C,MAAM,CAAC,OAAO,GAAG;AACf,UAAQ,oBAAE,WAAgB,GAAG,EAAE,IAAI,EAAE;AACnC,QAAI,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,cAAc,CAAC,CAAC;AACtD,QAAI,OAAO,GAAG,QAAQ,CAAC,WAAW,CAAC,CAAC;AACpC,QAAI,MAAM,GAAG,MAAM,WAAW,CAAC,WAAW,CAAC,CAAC;AAC5C,QAAI,MAAM,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;AACzB,YAAM,YAAY,CAAC,qBAAqB,EAAE,8BAA8B,CAAC,CAAC;KAC3E;;AAED,QAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC;;;AAGrC,UAAM,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;;AAG/B,UAAM,OAAO,CAAC,UAAU,CAAC;AACvB,UAAI,EAAJ,IAAI;AACJ,aAAO,EAAE,OAAO;AAChB,UAAI,EAAE,UAAU;KACjB,CAAC,CAAC;;AAEH,WAAO,IAAI,CAAC;GAEb,CAAA;;CAEF,CAAC","file":"commands/init.js","sourcesContent":["\nlet existsAsync = require('exists-async');\nlet fs = require('fs');\nlet jsonFile = require('@exponent/json-file');\nlet mkdirp = require('mkdirp');\nlet path = require('path');\n\nlet CommandError = require('./CommandError');\n\nmodule.exports = {\n  runAsync: async function (env, args) {\n    let pkgJsonPath = path.join(env.root, 'package.json');\n    let pkgJson = jsonFile(pkgJsonPath);\n    let exists = await existsAsync(pkgJsonPath);\n    if (exists && !args.force) {\n      throw CommandError('PACKAGE_JSON_EXISTS', \"package.json already exists!\");\n    }\n\n    let name = path.parse(env.root).name; // should this be `base`?\n\n    // Make sure the directory exists\n    await mkdirp.promise(env.root);\n\n\n    await pkgJson.writeAsync({\n      name,\n      version: '0.0.0',\n      main: 'index.js',\n    });\n\n    return true;\n\n  }\n\n};\n"],"sourceRoot":"/source/"}