{"version":3,"sources":["web/NewVersionAvailable.js"],"names":[],"mappings":"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","file":"web/NewVersionAvailable.js","sourcesContent":["let React = require('react');\n\nlet Button = require('react-bootstrap/lib/Button');\nlet ButtonInput = require('react-bootstrap/lib/ButtonInput');\nlet Input = require('react-bootstrap/lib/Input');\n\nlet Api = require('../application/Api');\nlet login = require('../application/login');\n\nlet autobind = require('autobind-decorator');\n\nlet STATES = {\n  UNKNOWN: 'UNKNOWN',\n  UP_TO_DATE: 'UP_TO_DATE',\n  OUT_OF_DATE: 'OUT_OF_DATE',\n};\n\nclass NewVersionAvailable extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      status: STATES.UNKNOWN,\n      responseData: null,\n    };\n    global._NewVersionAvailable = this;\n  }\n\n  _getUpdateUrl() {\n    if (this.state.responseData && this.state.responseData.updateUrl) {\n      return this.state.responseData.updateUrl;\n    } else {\n      return 'http://exponentjs.com/download';\n    }\n  }\n\n  @autobind\n  _goToUpdateUrl() {\n    require('shell').openExternal(this._getUpdateUrl());\n  }\n\n  render() {\n\n    switch (this.state.status) {\n\n      case STATES.OUT_OF_DATE:\n        return (\n          <div style={{\n            display: 'flex',\n            alignSelf: 'stretch',\n            flexDirection: 'column',\n            margin: 'auto',\n            height: 30,\n            background: '#fffbe6',\n            margin: 0,\n            padding: 0,\n            cursor: 'pointer',\n          }} onClick={this._goToUpdateUrl} >\n            <center style={{\n              paddingTop: 4,\n              fontWeight: '500',\n              fontFamily: ['Helvetica Neue', 'Sans-serif'],\n              fontSize: 13,\n              color: '#444444',\n            }}>There is a new version of XDE available <a onClick={this._goToUpdateUrl}>here</a></center>\n          </div>\n        );\n        break;\n\n      case STATES.UNKNOWN:\n      case STATES.UP_TO_DATE:\n      default:\n        return (<div style={{\n          display: 'none',\n        }} />);\n        break;\n    }\n  }\n\n  componentDidMount() {\n\n    Api.callMethodAsync('checkForUpdate', {\n      product: 'xde',\n      version: '0.1.0',\n    }).then((responseData) => {\n      let newStatus = STATES.UNKNOWN;\n      switch (responseData.updateAvailable) {\n\n        case true:\n          newStatus = STATES.OUT_OF_DATE;\n          break;\n\n        case false:\n          newStatus = STATES.UP_TO_DATE;\n          break;\n\n        default:\n          newStatus = STATES.UNKNOWN;\n          break;\n\n      }\n\n      this.setState({responseData, status: newStatus});\n\n    }, (err) => {\n      console.error(\"Failed to check to see if updates are available for XDE:\", err);\n    });\n\n  }\n\n\n}\n\nmodule.exports = NewVersionAvailable;\n"],"sourceRoot":"/source/"}